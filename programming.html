<!DOCTYPE html>
<html>
<head>
    <title>Ctrl-Z</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css"> 
	<link rel="stylesheet" type="text/css" href="mystyle.css">
</head>

<body>

<div class="container">
	<img src = "images/combined_logo2.png"></img>
</div>		

	<!-- menu -->
<div class="container">
	<ul class="nav nav-tabs">
	
	  <li class="active">
		  <a href="index.html">Home</a>
	  </li>
	   
	   <li class="dropdown">
		  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Team Profile<span class="caret"></span></a>
		  <ul class="dropdown-menu">
			  <li><a href="members.html">Members</a></li>
			  <li><a href="mentors.html">Coaches and Mentors</a></li>
		  </ul>
	  </li>
	  
	  <li class="dropdown">
		  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Robot<span class="caret"></span></a>
		  <ul class="dropdown-menu">
			  <li><a href="design.html">Design</a></li>
			  <li><a href="strategy.html">Strategy</a></li>
			  <li><a href="programming.html">Programming</a></li>
			  <!--   <li><a href="build.html">Building Instructions</a></li> 
			  <li><a href="robotBrochure.pdf" target="_blank">Robot Brochure</a></li> -->
		  </ul>
	  </li>
	 
	 <li class="dropdown">
		  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Research<span class="caret"></span></a>
		  <ul class="dropdown-menu">
			  <li><a href="solution.html">Solution</a></li>
			  <li><a href="experts.html">Experts</a></li>    
			  <li><a href="expertnotes.html">Expert Notes</a></li>
			  <li><a href="articles.html">Selected Academic Research</a></li>
			  <li><a href="references.html">References</a></li>
			  <li><a href="SpotSaverBrochureForProvincials.pdf" target="_blank">Project Brochure</a></li>
		  </ul>
	  </li>
	  
	  <li>
		  <a href="events.html">Sharing</a>
	  </li>

	 <li class="dropdown">
		  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Resources<span class="caret"></span></a>
		  <ul class="dropdown-menu">
			  <li><a href = "http://www.firstlegoleague.org/challenge" target="_blank">City Shaper Challenge Guide</a></li>
			  <li><a href = "fll/TheRobotGameRules.pdf" target="_blank">Latest rule updates - merged</a></li> 
			   <li><a href = "http://flltournament.com/Scoresheet.aspx?CID=51" target="_blank">Score Calculator</a></li>
			  <li><a href = "http://home.ican.net/~686280/index.html" target="_blank">Natures Fury Website</a></li>
			  <li><a href = "http://fllctrlz.github.io/world_class/index.html" target="_blank">World Class Website</a></li>
			  <li><a href = "http://fllctrlz.github.io/trash_trek/index.html" target="_blank">Trash Trek Website</a></li>
			  <li><a href = "http://fllctrlz.github.io/animal_allies/index.html" target="_blank">Animal Allies Website</a></li>
			  <li><a href="http://fllctrlz.github.io/hydrodynamics/index.html" target="_blank">HydroDynamics Website</a></li>
			  <li><a href="https://fllctrlz.github.io/into_orbit/index.html" target="_blank">Into Orbit Website</a></li>

		  </ul>
	  </li>

	  <li>
		  <a href="contact.html">Contact Us</a>
	  </li>			
  
  </ul>
  
  </div>
  <!-- end of menu -->


<div class="container">
    <h1>General Programming Strategy</h1>
	<br>
		<ul>
			<li>We use various functions to run our programs 
				(so we can reuse code and change 
			parameters, as required)</li>
			
			<li>We have created a selection program
			which allows us to quickly and efficiently 
			choose missions (or even re-run missions 
			quickly) during matches. Audible sounds 
			and meaningful EV3 screen messages allow 
			the user to select programs with ease</li>
			
			<li>By using gear lash removal before each 
			movement, the acceleration and deceleration movements when starting
			and stopping a movement, our own 
			error-corrected move block, and Proportional Integral Derivative
			line following, we are able to achieve more consistent and repeatable
			robot movement</li>
			
			<li>We regularly use functions, also known as subroutines, which allows us
			to reuse code whenever possible and to keep
			our program sizes manageable.
			</li>
			
			<li>We annotate our work to help us
			debug programs and to better understand
			the purpose of each line of code</li>
			
			<li>We make frequent use of our square up 
			function which allows the robot to position 
			itself perpendicularly to any line (from
			virtually any angle of attack)</li>
			
			<li>Our functions and parameters are given 
			descriptive and meaningful names to allow 
			us to easily understand what our programs 
			are doing</li>
			
			<li>Within all of our major movement
			functions (such as our error-corrected move block and PID line following block),
			we have a function inside that is constantly 
			checking if a certain exit condition is met.
			When that exit condition is met, the program
			immediately exits that loop causing the robot to 
			advance to the next robot maneuver. For example, stop
			the robot when one of the light sensors a black
			line.</li>
			
			<li>Our "Check-Abort" function constantly checks 
			whether the EV3 up arrow button is pressed.   
			The robot operator can interrupt missions at any time and
			still stay within the overall selection program 
			to avoid the need to exit the program and find 
			the next program or mission.</li>
			
			<li>When accelerating from a stationary position,
			our robot uses Ctrl-Z-designed acceleration and deceleration feature s
			to minimize the likelihood of wheel slip. 
			This provides for greater repeatability of 
			the robotâ€™s movements.</li>
			
			<li>As well, instead of using standard calibrated
			values, we use raw light sensor values for more
			granularity. Our calibration program collects the
			lowest and highest light readings the robot would 
			see. Then, based on those, we scale any light
			readings to a usable range where 0 is black and 
			100 is white.</li>
		
		</ul>
<!--
		<br>
		<h1>Program Hierarchy</h1>
		<br>
		<p>In the interest of maximizing programming efficiency, we use subroutines 
		(i.e. MyBlocks) whenever possible.  Subroutines are used for typical robot
		movements, like line following, squaring to a line, error-corrected movements,
		etc., as well as for entire missions.  The use of subroutines allows us to re-use
		programming code and enjoy the benefits of an efficient mission selection program. 
		This diagram below illustrates the great extent to which Ctrl-Z re-uses programming code.</p>
		<img src="images/robot/hierarchyWorlds.PNG"></img>
		-->
		<br>
		<h1>Function Examples</h1>
		<br>
		<h3>Gyro Turn</h3>
		 
		 <p>The Gyro Turn function uses the gyro sesnsor to help increase the accuracy of turns. It compares
			the current angle with the target angle, and turns until the target angle is reached. We start by turning at
			a very high power, causing the gyro sensor to overcorrect. We then make it turn back at a slower power until it
			reaches the target angle. This method allows for very accurate turns. However, since we use a very high power, it will cause
			the robot to overcorrect a large amount, so we programmed the sensor to look for a value less than the target angle, requiring
			less correction, as it will stop closer to its target value.
		</p>
		<br>
		<img src="images/robot/gyroturn.JPG"></img>
		<br>
		<br>
		<h3>Proportional Integral Derivative Line Following</h3>
		
		<p>Our Proportional Integral Derivative Line Following
		program is a smoother way to line follow that adjusts
		the power levels of motors B and C proportionally to 
		the distance from the edge of the line, which would
		have a light value of 50. It takes into account the 
		error (the difference between the optimal and current
		light sensor reading), the integral (the sum of all 
		errors), and the derivative (the difference between 
		the current error and last error). Those values are 
		scaled to an appropriate value for use in motor power levels
		based on three user-inputted coefficients in
		our constants.py module: kp, ki, and kd.</p>
		<br>
		<img src="images/robot/pid.jpg"></img>
		<br>
		<br>
		<h3>Main Selection Program</h3>

		<p>This selection program allows us to quickly and 
		efficiently switch programs/missions 
		during the two-and-a-half minute match. 
		Our selection program contains functions, each containing one of our missions.
		The user of the robot simply starts the selection 
		program and clicks the centre button to start the first
		mission. Then, when the mission finishes, the robot 
		automatically advances to the next mission and waits for
		the user to click the centre button to run the appropriate mission.
		In case one needs to go backwards or 
		forwards through the list of missions, the program 
		accommodates that by allowing the user to navigate 
		with the left and right arrow buttons.</p>
		<br>
		<center>
		<img src="images/robot/main.JPG"></img>
	    </center>
		<br>
		<br>
		<h3>Error-Corrected Move Block</h3>

		<p>For straighter and more accurate movements, 
		our program continuously measures the distances 
		travelled by each drive motor and constantly adjusts their 
		speeds to maintain the predetermined ratio of the 
		distance to be travelled by each drive motor. This functions also allows for
		more accurate robot arc turns, acceleration at the beginning of the movement and
		deceleration at the end.
		</p>
		
		<img src="images/robot/zmove.jpg"></img>
		<br>
		<br>
		<h3>Square Up</h3>
		<p>We have created a function that makes the robot completely perpendicular to the edge of a black line.
		Each light sensor corresponds with a motor. The robot drives up to the line and has the light sensor check the
		reflected light values. If the light sensor sees a value of less than 50 (black), it will tell the motor to move
		towards a value greater than 50 (white). It does this for both motors while for a set amount of time while slowly decreasing in power,
		until the robot becomes completely perpendicular to the edge of the line.
		</p>
		<br>
		<img src="images/robot/squareup.jpg"></img>
		<br>
		<br>
		<h2>Full Programming Documentation (Click to See Full Code!)</h2>
		<a href="ProgramDocProvincials.pdf" target="_blank">
		<img src="images/robot/programdoc.JPG"></img></a>
		<br>
		<br>
    </div>
	<script src="jquery/jquery-1.11.1.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
</body>
</html>
